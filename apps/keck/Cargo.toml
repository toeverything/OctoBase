[package]
name = "keck"
version = "0.1.0"
authors = ["DarkSky <darksky2048@gmail.com>"]
edition = "2021"
license = "AGPL-3.0-only"

[features]
default = ["jwst"]
affine = []
jwst = ["api", "schema", "docs"]
api = ["utoipa"]
docs = ["mdbook"]
schema = ["utoipa-swagger-ui"]

[dependencies]
anyhow = "^1.0.64"
chrono = "^0.4.22"
dashmap = "5.4.0"
futures = "^0.3.24"
http = "^0.2.8"
serde_json = "^1.0.85"
tower = "^0.4.13"
thiserror = "^1.0.34"
time = "^0.3.14"

[dependencies.axum]
version = "^0.5.16"
features = ["ws"]

[dependencies.fern]
version = "0.6.1"
features = ["colored"]

[dependencies.log]
version = "^0.4.17"
features = ["max_level_trace", "release_max_level_info"]

[dependencies.serde]
version = "^1.0.144"
features = ["derive"]

[dependencies.sqlx]
version = "^0.6.1"
features = ["chrono", "macros", "migrate", "runtime-tokio-rustls", "sqlite"]

[dependencies.tower-http]
version = "^0.3.4"
features = ["cors", "fs"]

[dependencies.tokio]
version = "^1.21.1"
features = ["macros", "rt-multi-thread", "signal"]

[dependencies.utoipa]
version = "^2.1.0"
features = ["axum_extras"]
optional = true

[dependencies.utoipa-swagger-ui]
version = "^2.0.1"
features = ["axum"]
optional = true

[dependencies.uuid]
version = "1.1.2"
default-features = false
features = ["v4"]

[dependencies.lib0]
version = "^0.12.0"
features = ["lib0-serde"]

[dependencies.yrs]
path = "../../libs/yrs"
version = "^0.12.0"

[dependencies.jwst]
path = "../../libs/jwst"

[dependencies.jwst_logger]
path = "../../libs/logger"

[dev-dependencies]
assert-json-diff = "^2.0.2"
axum-test-helper = "^0.1.1"

[build-dependencies.mdbook]
version = "^0.4.21"
default-features = false
optional = true

[profile.dev.package.sqlx-macros]
opt-level = 3
